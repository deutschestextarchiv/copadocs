<section>
  <h1>Technik, Tools, Nachnutzbarkeit</h1>

  <h2>Kodierung</h2>

  <p>
    Die Transkription der Handschriften im XML-Format TEI P5 folgt in großen
    Teilen dem <a href="https://www.deutschestextarchiv.de/doku/basisformat/">Basisformat des Deutschen Textarchivs (DTABf)</a>.
    Neben den Metadaten im Kopf – <code>&lt;teiHeader&gt;</code> – werden im
    Textbereich – <code>&lt;text&gt;</code> – folgende Elemente benutzt:
  </p>

  <div class="table-responsive">
    <table class="table table-striped copa-tags">
      <thead>
        <tr>
          <th>Element</th>
          <th>Beschreibung</th>
          <th>Bemerkungen</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>add</td>
          <td>(nachträgliche) Hinzufügung</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@hand</td>
                  <td>Hand des Schreibenden</td>
                  <td>entsprechender Wert aus <code>/TEI<wbr/>/teiHeader<wbr/>/profileDesc<wbr/>/handNotes<wbr/>/handNote<wbr/>/@scribe</code></td>
                </tr>
                <tr>
                  <td>@place</td>
                  <td>Ort der Hinzufügung</td>
                  <td>
                    <table class="table table-sm">
                      <tr>
                        <td>"above"</td>
                        <td>intralineare Einfügung darüber</td>
                      </tr>
                      <tr>
                        <td>"below"</td>
                        <td>interlineare Einfügung darunter</td>
                      </tr>
                      <tr>
                        <td>"bottom"</td>
                        <td>Einfügung am unteren Seitenrand</td>
                      </tr>
                      <tr>
                        <td>"inline"</td>
                        <td>Einfügung auf der Zeile</td>
                      </tr>
                      <tr>
                        <td>"margin"</td>
                        <td>Einfügung am Rand</td>
                      </tr>
                      <tr>
                        <td>"opposite"</td>
                        <td>Zusatz, der auf anderer Briefseite weitergeht</td>
                      </tr>
                      <tr>
                        <td>"top"</td>
                        <td>Einfügung am oberen Seitenrand</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>body</td>
          <td>Textteil</td>
          <td></td>
        </tr>
        <tr>
          <td>dateline</td>
          <td>Datumszeile</td>
          <td></td>
        </tr>
        <tr>
          <td>del</td>
          <td>(nachträgliche) Tilgung</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@hand</td>
                  <td>Hand des Schreibenden</td>
                  <td>entsprechender Wert aus <code>/TEI<wbr/>/teiHeader<wbr/>/profileDesc<wbr/>/handNotes<wbr/>/handNote<wbr/>/@scribe</code></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <!-- fw: nur in kfb_02229_w_m_zeichner_1880_1905-18_pp4-ap1-ao1/kfb_02229_w_pp_1905_12_14.xml, da ohne Inhalt
        <tr>
          <td>desc</td>
          <td></td>
          <td></td>
        </tr>
        -->
        <tr>
          <td>emph</td>
          <td>Hervorhebung</td>
          <td></td>
        </tr>
        <tr>
          <td>facsimile</td>
          <td>Faksimile</td>
          <td></td>
        </tr>
        <tr>
          <td>foreign</td>
          <td>fremdsprachliches Material</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@xml:lang</td>
                  <td>Sprache</td>
                  <td>Sprachcode aus <a href="https://de.wikipedia.org/wiki/ISO_639#ISO_639-3">ISO 639-3</a></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>graphic</td>
          <td>Verweis auf Abbildung</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@mimeType</td>
                  <td>MIME-Typ der Bilddatei</td>
                  <td><code>image/jpeg</code> (andere Formate werden im Projekt nicht benutzt)</td>
                </tr>
                <tr>
                  <td>@url</td>
                  <td>Ort der Bilddatei</td>
                  <td></td>
                </tr>
                <tr>
                  <td>@xml:id</td>
                  <td>ID, wird für die Referenzierung in <code>&lt;pb facs="…"/&gt;</code> benutzt</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>handShift</td>
          <td>Wechsel des Schreibenden</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@medium</td>
                  <td>Schreibinstrument</td>
                  <td>entsprechender Wert aus <code>/TEI<wbr/>/teiHeader<wbr/>/profileDesc<wbr/>/handNotes<wbr/>/handNote<wbr/>/@medium</code></td>
                </tr>
                <tr>
                  <td>@scribe</td>
                  <td>Hand des Schreibenden</td>
                  <td>entsprechender Wert aus <code>/TEI<wbr/>/teiHeader<wbr/>/profileDesc<wbr/>/handNotes<wbr/>/handNote<wbr/>/@scribe</code></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>hi</td>
          <td>typografische Hervorhebung</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@ana</td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <td>@hand</td>
                  <td>nur in Verbindung mit <code>@rendition="#u"</code>: Hand des Unterstreichenden</td>
                  <td>entsprechender Wert aus <code>/TEI/teiHeader<wbr/>/profileDesc<wbr/>/handNotes<wbr/>/handNote<wbr/>/@scribe</code></td>
                </tr>
                <tr>
                  <td>@rendition</td>
                  <td>Textformatierung</td>
                  <td>
                    <table class="table table-sm">
                      <tr>
                        <td>#b</td>
                        <td>fett</td>
                      </tr>
                      <tr>
                        <td>#c</td>
                        <td>zentriert</td>
                      </tr>
                      <tr>
                        <td>#i</td>
                        <td>lateinische Schrift</td>
                      </tr>
                      <tr>
                        <td>#r</td>
                        <td>rechtsbündig</td>
                      </tr>
                      <tr>
                        <td>#sub</td>
                        <td>tiefgestellt</td>
                      </tr>
                      <tr>
                        <td>#sup</td>
                        <td>hochgestellt</td>
                      </tr>
                      <tr>
                        <td>#u</td>
                        <td>unterstrichen</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>lb</td>
          <td>Umbruch am Zeilenende</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@break</td>
                  <td>Art des Umbruchs</td>
                  <td>
                    <table class="table table-sm">
                      <tr>
                        <td>"no"</td>
                        <td>Umbruch mit Trennung im Wort</td>
                      </tr>
                      <tr>
                        <td>"yes"</td>
                        <td>Umbruch zwischen Wörtern</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>milestone</td>
          <td>Textunterbrechung</td>
          <td>nur als abschnitttrennende horizontale Linie: <code>&lt;milestone rendition="#hr" unit="section"/&gt;</code></td>
        </tr>
        <tr>
          <td>opener</td>
          <td>Briefanfang</td>
          <td></td>
        </tr>
        <tr>
          <td>p</td>
          <td>Textabsatz</td>
          <td></td>
        </tr>
        <tr>
          <td>pb</td>
          <td>Seitenbeginn</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@break</td>
                  <td>Art des Umbruchs</td>
                  <td>
                    <table class="table table-sm">
                      <tr>
                        <td>"no"</td>
                        <td>Seitenumbruch mit Trennung im Wort</td>
                      </tr>
                      <tr>
                        <td>"yes"</td>
                        <td>Seitenumbruch zwischen Wörtern</td>
                      </tr>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td>@facs</td>
                  <td>Verweis auf Faksimile</td>
                  <td>entsprechendes Element aus <code>/TEI<wbr/>/facsimile<wbr/>/graphic</code></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>placeName</td>
          <td>Ortsname</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@type</td>
                  <td>Art der Ortsbezeichnung</td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>salute</td>
          <td>Anrede, Grußformel</td>
          <td></td>
        </tr>
        <tr>
          <td>seg</td>
          <td>Textsegment</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@ana</td>
                  <td></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <!-- fw: nur in kfb_02229_w_m_zeichner_1880_1905-18_pp4-ap1-ao1/kfb_02229_w_pp_1905_12_14.xml, da ohne Inhalt
        <tr>
          <td>signatures</td>
          <td></td>
          <td></td>
        </tr>
        -->
        <tr>
          <td>space</td>
          <td>horizontaler Leerraum</td>
          <td>nur als <code>&lt;space/&gt;</code></td>
        </tr>
        <tr>
          <td>surname</td>
          <td>Nachname</td>
          <td></td>
        </tr>
        <tr>
          <td>unclear</td>
          <td>unsichere Lesart</td>
          <td>
            <table class="table table-sm">
              <thead>
                <tr>
                  <th>Attribut</th>
                  <th>Beschreibung</th>
                  <th>Werte</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>@reason</td>
                  <td>Grund</td>
                  <td>
                    <table class="table table-sm">
                      <tr>
                        <td>"damage"</td>
                        <td>Beschädigung</td>
                      </tr>
                      <tr>
                        <td>"faded"</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td>"hand"</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td>"knick"</td>
                        <td>Knick</td>
                      </tr>
                      <tr>
                        <td>"overwriting"</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td>"rubbing"</td>
                        <td></td>
                      </tr>
                      <tr>
                        <td>"shorthand"</td>
                        <td>Kurzschrift</td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td>w</td>
          <td>einzelnes Wort</td>
          <td>wird benutzt, um in der Vorlage zusammengeschriebene Wörter als separate Einheiten zu kennzeichnen</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h2>Darstellung von Textphänomenen</h2>

  <h3>Handschriftenspezifische Phänomene</h3>
  <div class="tei-text mb-3">
    <div class="card">
      <div class="card-body">
        <p>Dieses <span class="tei-add">Wort</span> ist eine Hinzufügung.</p>
        <ul>
          <li>Eine <span class="tei-add" data-place="above">intralineare Einfügung</span> darüber.</li>
          <li>Eine <span class="tei-add" data-place="below">interlineare Einfügung</span> darunter.</li>
          <li>Eine <span class="tei-add" data-place="top">Einfügung</span> am oberen Seitenrand.</li>
          <li>Eine <span class="tei-add" data-place="bottom">Einfügung</span> am unteren Seitenrand.</li>
          <li>Eine <span class="tei-add" data-place="margin" data-hand="arzt">Einfügung</span> am Rand der Hand <code>arzt</code>.</li>
          <li>Eine <span class="tei-add" data-place="inline">Einfügung</span> auf der Zeile.</li>
          <li>Ein <span class="tei-add" data-place="opposite">Zusatz</span>, der auf anderer Briefseite weitergeht.</li>
        </ul>
        <p>Dieses <span class="tei-del">Wort</span> ist eine Streichung.</p>
        <p>Nach diesem Wort <span class="tei-handShift" data-medium="ink" data-scribe="patient"/>
          findet ein Wechsel zum Medium "ink" des Schreibers "patient" statt.</p>
        <p>Diese <span class="tei-w">zwei</span><span class="tei-w">Wörter</span> sind
          separate Tokens.</p>
      </div>
    </div>
  </div>

  <h3>Allgemeine Formatierungen</h3>
  <div class="tei-text mb-3">
    <div class="card">
      <div class="card-body">
        <p data-rendition="#c">Dieser Text ist zentriert.</p>
        <p data-rendition="#r">Dieser Text ist rechtsbündig.</p>
        <p>Dieses <span data-rendition="#i">Wort</span> ist in lateinischer Schrift (ansonsten Kurrentschrift).</p>
        <p>Dieses <span data-rendition="#sub">Wort</span> ist tiefgestellt.</p>
        <p>Dieses <span data-rendition="#sup">Wort</span> ist hochgestellt.</p>
        <p>Dieses <span data-rendition="#u">Wort</span> ist unterstrichen.</p>
        <p>Eine Klinik liegt in <span class="tei-placeName">Münster</span> (nur bei westfälischen Patientenbriefen annotiert).</p>
        <p><span class="tei-surname">M.</span> ist ein abgekürzter Nachname.</p>
      </div>
    </div>
  </div>

  <hr/>

  <h2>Technische Implementation</h2>

  <h3>Minimalistische Voraussetzungen</h3>
  <p>
    Der technische Ansatz der Präsentation der Edition und aller Begleittexte
    hat zum Ziel, mit möglichst wenig Voraussetzungen aus den vorhandenen XML-Daten
    eine komplett lauffähige Webseite zu erstellen, für deren Hosting kein
    weiterer Software-Stack (außer einem Webserver) nötig ist. Für das Erstellen
    der für die Tabellen und Aktenansichten nötigen Datenexzerpte sowie für die
    Generierung der HTML-Ansichten der einzelnen Dokumente und Begleittexte
    sind lediglich die beiden Tools <code><a href="https://jqlang.github.io/jq/" target="_blank">jq</a></code>
    und <code><a href="http://xmlsoft.org/xslt/xsltproc.html" target="_blank">xsltproc</a></code>
    Voraussetzung.
  </p>

  <h3>TEI-Transformation</h3>
  <p>
    Die Transformation der einzelnen Texte aus XML in eine HTML-Ansicht mithilfe
    von <abbr title="Extensible Stylesheet Language Transformations" data-bs-toggle="tooltip">XSLT</abbr>
    1.0 erfolgt vollständig über die Konvertierung von XML-Elementen in das
    HTML-Element <code>&lt;span&gt;</code> mit entsprechenden <code>@data</code>-Attributen:
  </p>

  <pre class="mx-5"><code class="language-xml">
&lt;!-- TEI text elements --&gt;
&lt;xsl:template match="/t:TEI/t:text//t:*"&gt;
  &lt;span class="tei-{local-name(.)}"&gt;
    &lt;xsl:call-template name="set-data-attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- data attributes --&gt;
&lt;xsl:template name="set-data-attributes"&gt;
  &lt;xsl:for-each select="@*"&gt;
    &lt;xsl:call-template name="data-attribute"&gt;
      &lt;xsl:with-param name="name" select="name(current())"/&gt;
      &lt;xsl:with-param name="value" select="current()"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;!-- single data attribute --&gt;
&lt;xsl:template name="data-attribute"&gt;
  &lt;xsl:param name="name"/&gt;
  &lt;xsl:param name="value"/&gt;
  &lt;xsl:attribute name="data-{translate($name, ':', '-')}"&gt;
    &lt;xsl:value-of select="$value"/&gt;
  &lt;/xsl:attribute&gt;
&lt;/xsl:template&gt;</code></pre>

  <p>
    Die ausschließliche Verwendung von <code>&lt;span&gt;</code>-Elementen hat den
    positiven Nebeneffekt, dass stets valides HTML produziert wird. Die Gestaltung der
    einzelnen Textelemente wird <a href="https://github.com/deutschestextarchiv/copadocs/blob/main/web/assets/css/tei.css"
    target="_blank">mit wenigen Zeilen <abbr title="Cascading Stylesheets" data-bs-toggle="tooltip">CSS</abbr></a>
    realisiert. Besondere Effekte wie die Einbindung der Faksimilebilder und eine
    Verfeinerung der Textdarstellung v. a. bzgl. rechtsbündigem und zentriertem
    Text werden mit Javascript umgesetzt.
    Dabei ist der gesamte Quellcode dieser Webseite öffentlich und kann
    für ähnlich ansetzende Projekte unter der Lizenz
    <a href="https://github.com/deutschestextarchiv/copadocs/blob/main/LICENSE.md" target="_blank">CC BY-SA 4.0</a>
    nachgenutzt werden.
  </p>

  <p>
    Die Auslieferung der generierten Webseite benötigt nur einen Webserver. Alle für den
    Betrieb nötigen Dateien, Schriften und Bibliotheken werden im Paket mitgeliefert,
    aufwendige Rechenzeit für Server entfällt. Damit folgt das Projekt den Zielen der
    <a href="https://www.cdcs.ed.ac.uk/digital-humanities-climate-coalition" target="_blank">Digital
    Humanities Climate Coalition</a> für einen nachhaltigeren und bewussteren Umgang
    mit den begrenzten Ressourcen aus Sicht der Digital Humanities.
  </p>

  <!-- fw: https://endings.uvic.ca/compliance.html wäre auch noch nett, da fehlen aber noch ein paar Kleinigkeiten zu -->

<link rel="stylesheet" href="assets/highlight/intellij-light.min.css"/>
<script src="assets/highlight/highlight.min.js"></script>
<script>hljs.highlightAll();</script>

  <hr/>

  <h2>Nachnutzung</h2>
  <p>
    <img src="assets/logos/cc-by-sa.svg" style="float:right; height:70px; margin:0 0 10px 10px" alt="Logo CC BY-SA 4.0"/>
    Alle Textquellen im XML-Format TEI P5 sowie der Quellcode zur Erstellung dieser
    Webseite sind unter Beachtung der Lizenz
    <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.de" target="_blank">Namensnennung –
    Weitergabe unter gleichen Bedingungen 4.0 International (CC BY-SA 4.0)</a>
    verfügbar:
  </p>
  <ul>
    <li><a href="https://github.com/deutschestextarchiv/copadocs/tree/main/data" target="_blank">Daten im Repositorium auf GitHub</a></li>
    <li><a href="https://github.com/deutschestextarchiv/copadocs/archive/refs/heads/main.zip" target="_blank">Download des Repositoriums von GitHub</a></li>
  </ul>
</section>
